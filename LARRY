(DEFINE-FILE-INFO PACKAGE "INTERLISP" READTABLE "INTERLISP" BASE 10)

(FILECREATED " 1-Nov-2022 22:41:58" {DSK}<home>larry>ilisp>homedir>LARRY.;3 12640  

      :CHANGES-TO (FNS COMPAREMOVDS)

      :PREVIOUS-DATE " 1-Nov-2022 21:03:41" {DSK}<home>larry>ilisp>homedir>LARRY.;2)


(PRETTYCOMPRINT LARRYCOMS)

(RPAQQ LARRYCOMS
       [(P (MOVD? 'NILL 'MAKE-EXTERNALFORMAT)
           (VIDEOCOLOR T)
           (WINDOWPROP PROMPTWINDOW 'TITLE NIL)
           (DSPFONT '(HELVETICA 18 BRR)
                  PROMPTWINDOW)
           (SHAPEW PROMPTWINDOW '(565 902 758 95))
           (FONTSET 'LARGER)
           (NLSETQ (FILESLOAD (SYSLOAD)
                          UNIXYCD))
           (MOVD? 'VALUEOF 'IT))
        (PROP FILETYPE LARRY)
        (ADVISE KOTOLOGOW (ERROR :IN \DO-DEFINE-FILE-INFO))
        (VARS BREAKREGIONSPEC WHEELSCROLLDELTA DEFAULTCOPYRIGHTOWNER CLEANUPOPTIONS EDITCHARACTERS 
              CUTEFLG **COMMENT**FLG FB.DEFAULT.INFO NEWFONTVARS (LCASEFLG)
              (*ED-OFFERS-PROPERTY-LIST*)
              (DEFAULTPRINTERTYPE 'POSTSCRIPT)
              [INITIALSLST '(("larry" "Larry" "lmm")
                             ("masinter" "Larry" "lmm")
                             ("lmm" "Larry" "lmm")
                             ("pi" "Larry" "lmm"]
              (INITIALS "lmm")
              (IDLE.PROFILE '(TIMEOUT 10 DISPLAYFN IDLE.RANDOM SAVEVM 1 LOGOUT 10))
              [BICLOCKUSERPROPS `(COLOR BLACK MARKS T DIGITS NIL REGION
                                        (,(+ (CAR (WINDOWPROP (LOGOW)
                                                         'REGION))
                                             27)
                                         854 130 130]
              (*UPPER-CASE-FILE-NAMES* NIL)
              (AUTOBACKTRACEFLG 'ALWAYS!)
              (HOMEDIR (CONCAT LOGINHOST/DIR "homedir>"))
              (*BUTTONS-SAVE-DIRECTORY* HOMEDIR))
        (FILES (SYSLOAD)
               PAGEHOLD BICLOCK GITFNS FILEWATCH SAMEDIR MEDLEY-UTILS VTCHAT PICK BUTTONS WDWHACKS)
        (P (FILEWATCH :ON)
           (RESTORE-BUTTONS (CONCAT LOGINHOST/DIR "homedir>")
                  NIL)
           (NLSETQ (POSTSCRIPT.INIT)))
        (FNS 3WAY CLOSEI COMPAREMOVDS FINDFONTVARS LOADALL LOOPSCOMPARE CDIRS LOWESTVERSION HCENVOS 
             SHOWDIFFS shell)
        (COMMANDS)
        (FUNCTIONS DE)
        (DECLARE%: DONTEVAL@LOAD DOEVAL@COMPILE DONTCOPY COMPILERVARS (ADDVARS (NLAMA shell)
                                                                             (NLAML)
                                                                             (LAMA])

(MOVD? 'NILL 'MAKE-EXTERNALFORMAT)

(VIDEOCOLOR T)

(WINDOWPROP PROMPTWINDOW 'TITLE NIL)

(DSPFONT '(HELVETICA 18 BRR)
       PROMPTWINDOW)

(SHAPEW PROMPTWINDOW '(565 902 758 95))

(FONTSET 'LARGER)

(NLSETQ (FILESLOAD (SYSLOAD)
               UNIXYCD))

(MOVD? 'VALUEOF 'IT)

(PUTPROPS LARRY FILETYPE CL:COMPILE-FILE)

[XCL:REINSTALL-ADVICE 'KOTOLOGOW :BEFORE '((:LAST (SETQ ANLEDELTA 30))
                                           (:LAST (SETQ ANGEDELTA 30))
                                           (:LAST (SETQ ANGLEDELTA 30]

[XCL:REINSTALL-ADVICE '(ERROR :IN \DO-DEFINE-FILE-INFO)
       :BEFORE
       '((:LAST (AND (EQ MESS2 ':FORMAT)
                     (RETURN]

(READVISE KOTOLOGOW (ERROR :IN \DO-DEFINE-FILE-INFO))

(RPAQQ BREAKREGIONSPEC (400 -120 500 250))

(RPAQQ WHEELSCROLLDELTA -20)

(RPAQQ DEFAULTCOPYRIGHTOWNER Interlisp.Org)

(RPAQQ CLEANUPOPTIONS (RC F))

(RPAQQ EDITCHARACTERS (J X Z Y N O))

(RPAQQ CUTEFLG T)

(RPAQQ **COMMENT**FLG " ;-- ")

(RPAQQ FB.DEFAULT.INFO (LENGTH CREATIONDATE))

(RPAQQ NEWFONTVARS (\TTYIN.LAST.FONT \TTYIN.LAST.COMMENTFONT \DSKDISPLAY.FONT \DSKDISPLAY.BOLD 
                          TEDIT.PROMPT.FONT TEDIT.ICON.FONT FB.MENUFONT FB.PROMPTFONT FB.BROWSERFONT
                          FB.BROWSER.DIRECTORY.FONT FB.ICONFONT IRM.CREF.FONT *WHO-LINE-NAME-FONT* 
                          *WHO-LINE-VALUE-FONT* PAGE.WAIT.FONT FW-Font *BUTTONS-LABEL-FONT* 
                          *BUTTONS-MENU-FONT* \GUARANTEEDDISPLAYFONT DEFAULTFONT))

(RPAQQ LCASEFLG NIL)

(RPAQQ *ED-OFFERS-PROPERTY-LIST* NIL)

(RPAQQ DEFAULTPRINTERTYPE POSTSCRIPT)

(RPAQQ INITIALSLST (("larry" "Larry" "lmm")
                    ("masinter" "Larry" "lmm")
                    ("lmm" "Larry" "lmm")
                    ("pi" "Larry" "lmm")))

(RPAQ INITIALS "lmm")

(RPAQQ IDLE.PROFILE (TIMEOUT 10 DISPLAYFN IDLE.RANDOM SAVEVM 1 LOGOUT 10))

(RPAQ BICLOCKUSERPROPS `(COLOR BLACK MARKS T DIGITS NIL REGION
                               (,(+ (CAR (WINDOWPROP (LOGOW)
                                                'REGION))
                                    27)
                                854 130 130)))

(RPAQQ *UPPER-CASE-FILE-NAMES* NIL)

(RPAQQ AUTOBACKTRACEFLG ALWAYS!)

(RPAQ HOMEDIR (CONCAT LOGINHOST/DIR "homedir>"))

(RPAQ *BUTTONS-SAVE-DIRECTORY* HOMEDIR)

(FILESLOAD (SYSLOAD)
       PAGEHOLD BICLOCK GITFNS FILEWATCH SAMEDIR MEDLEY-UTILS VTCHAT PICK BUTTONS WDWHACKS)

(FILEWATCH :ON)

(RESTORE-BUTTONS (CONCAT LOGINHOST/DIR "homedir>")
       NIL)

(NLSETQ (POSTSCRIPT.INIT))
(DEFINEQ

(3WAY
  [LAMBDA (X)                                              (* ; "Edited  2-Jun-2022 20:23 by larry")
    (LET [(CURRENT (INFILEP X))
          (START (INFILEP (PACKFILENAME.STRING 'VERSION (LOWESTVERSION X)
                                 'NAME X)))
          (CLTL2 (INFILEP (PACKFILENAME.STRING 'DIRECTORY (MEDLEYDIR "CLTL2")
                                 'NAME X]
         (CSBROWSER START CURRENT)
         (CSBROWSER START CLTL2])

(CLOSEI
  [LAMBDA NIL                                               (* ; "Edited 19-Feb-2021 14:33 by rmk:")

    (* ;; "Close all inspector windows")

    (FOR W IN (OPENWINDOWS) WHEN (OR (EQ 'INSPECTW.REPAINTFN (WINDOWPROP W 'REPAINTFN))
                                     (WINDOWPROP W 'INSPECTWINDOW)) DO (CLOSEW W])

(COMPAREMOVDS
  [LAMBDA NIL                                                (* ; "Edited  1-Nov-2022 22:01 by lmm")
    (FOR PAIR FL WH DEF IN \MAIKO.MOVDS
       DO (PRINTOUT T (CAR PAIR)
                 " => "
                 (CADR PAIR)
                 T
                 (SETQ WH (WHEREIS (CAR PAIR)
                                 'FNS T))
                 " - " .PPV (COMPARELISTS (OR (GETDEF (CAR PAIR)
                                                     'FNS
                                                     'MAIKOETHER
                                                     'NOERROR)
                                              (GETDEF (CAR PAIR)
                                                     'FNS "../SOURCES/MAIKOETHER")
                                              (HELP (CAR PAIR)
                                                    "NO 1DEF"))
                                   (OR (FOR LOC IN (WHEREIS (CADR PAIR)
                                                          'FNS T) WHEN (SETQ FL (INFILEP LOC))
                                          WHEN (SETQ DEF (GETDEF (CADR PAIR)
                                                                'FNS FL 'NOERROR))
                                          DO (RETURN DEF))
                                       (HELP (CADR PAIR)
                                             "NO DEF")))
                 T)
          (AND FL DEF (ED (CADR PAIR)
                          'FNS FL])

(FINDFONTVARS
  [LAMBDA NIL                                                (* ; "Edited 21-Oct-2022 21:15 by lmm")
    (MAPATOMS #'(LAMBDA (X)
                  (AND (BOUNDP X)
                       (FMEMB (TYPENAME (GETTOPVAL X))
                              '(FONTCLASS FONTDESCRIPTOR))
                       (NOT (ASSOC X FONTVARS)
                            (NOT (FMEMB X NEWFONTVARS)))
                       (PUSH NEWFONTVARS X])

(LOADALL
  [LAMBDA NIL                                                (* ; "Edited 19-Oct-2022 17:00 by lmm")
    (FILESLOAD LOADLOOPS)
    (LOADLOOPS)
    (COND
       ((CL:Y-OR-N-P "Load Truckin?")
        (CNDIR "../truckin")
        (FILESLOAD TRUCKINLOAD)
        (OR (BOUNDP 'TRUCKINVARS)
            (SETQ TRUCKINVRS))
        (LoadTruckin)))
    (COND
       ((CL:Y-OR-N-P "Load sources?")
        (pushnew DIRECTORIES TruckinPlayersDirectory)
        (FOR X IN (REVERSE FILELST) WHEN (NOT (MEMBER X BEFOREFILES))
           DO (LOAD X 'PROP)
              (MASTERSCOPE `(ANALYZE ANY ON ',X])

(LOOPSCOMPARE
  [LAMBDA NIL                                                (* ; "Edited 28-Oct-2022 20:30 by lmm")
                                                             (* ; "Edited 27-Oct-2022 07:19 by lmm")
                                                             (* ; "Edited 22-Oct-2022 09:41 by lmm")
    (CDIRS "/home/larry/ilisp/loops/" "/home/larry/ilisp/loops-redo/" '((system system)
                                                                        (library library)
                                                                        (users/rules users/rules)
                                                                        (users users-src)
                                                                        (truckin truckin-src)
                                                                        (truckin/players 
                                                                               truckin-src/players])

(CDIRS
  [LAMBDA (DIR1 DIR2 PAIRS)                                  (* ; "Edited 27-Oct-2022 07:18 by lmm")
    (FOR DIR IN PAIRS do (CDBROWSER (COMPAREDIRECTORIES (DIRECTORYNAME (CONCAT DIR1 (CAR DIR)))
                                           (DIRECTORYNAME (CONCAT DIR2 (CADR DIR)))
                                           NIL NIL NIL NIL NIL NIL T))
                         (UNTIL (CL:Y-OR-N-P (CL:FORMAT NIL "Done comparing ~a?" DIR)) do NIL])

(LOWESTVERSION
  [LAMBDA (X)                                              (* ; "Edited  2-Jun-2022 20:14 by larry")
    (LET ((VERS (DIRECTORY (PACKFILENAME.STRING 'VERSION '* 'BODY X)))
          (MIN 9999991))
         (for Y in VERS bind Z when (< (SETQ Z (FILENAMEFIELD Y 'VERSION))
                                       MIN) do (SETQ MIN Z))
         MIN])

(HCENVOS
  [LAMBDA NIL                                              (* ; "Edited 26-Jul-2022 12:16 by larry")
    (HCFILES "{DSK}<home>larry>envos>" "{DSK}<home>larry>medley>tmp>psfiles>"])

(SHOWDIFFS
  [LAMBDA (DELETEFLG)                                        (* ; "Edited 20-Oct-2022 08:44 by lmm")
    (FOR X IN FILELST BIND Y Z P E WHEN [SETQ Y (CDR (GET X 'FILE]
       DO (PRINTOUT T X Y T)
          (FOR C IN Y DO (FOR D IN (CDR C) DO (PRINTOUT T X " " (CAR C)
                                                     " " D ": " [SETQ P (COMPAREDEFS
                                                                         D
                                                                         (CAR C)
                                                                         '(NIL FILE]
                                                     T T)
                                              (IF (AND DELETEFLG (EQ P 'SAME))
                                                  THEN (DREMOVE D C)))
                         (IF (AND DELETEFLG (NULL (CDR C)))
                             THEN (DREMOVE C (GET X 'FILE])

(shell
  [NLAMBDA LINE                                              (* ; "Edited 17-Oct-2022 08:38 by lmm")
                                                            (* ; "Edited  7-Sep-2020 13:28 by rmk:")
    [SETQ LINE (CONCATLIST (FOR X IN LINE JOIN (LIST X " "]
    (CL:WITH-OPEN-FILE (STREAM "{NODIRCORE}shell-dribble.txt" :DIRECTION :IO)
           (ShellCommand LINE STREAM)
           (SETFILEPTR STREAM 0)
           (UNTIL (EOFP STREAM) COLLECT (CL:READ-LINE STREAM :EOF-ERROR-P NIL :EOF-VALUE NIL])
)

(DEFMACRO DE (X Y &REST Z)                                   (* ; "Edited 23-Oct-2022 07:30 by lmm")
   `(DEFINEQ [,X (LAMBDA ,Y
                   ,@Z]))
(DECLARE%: DONTEVAL@LOAD DOEVAL@COMPILE DONTCOPY COMPILERVARS 

(ADDTOVAR NLAMA shell)

(ADDTOVAR NLAML )

(ADDTOVAR LAMA )
)
(DECLARE%: DONTCOPY
  (FILEMAP (NIL (5229 12311 (3WAY 5239 . 5700) (CLOSEI 5702 . 6056) (COMPAREMOVDS 6058 . 7569) (
FINDFONTVARS 7571 . 8026) (LOADALL 8028 . 8660) (LOOPSCOMPARE 8662 . 9661) (CDIRS 9663 . 10149) (
LOWESTVERSION 10151 . 10545) (HCENVOS 10547 . 10748) (SHOWDIFFS 10750 . 11755) (shell 11757 . 12309)) 
(12313 12479 (DE 12313 . 12479)))))
STOP
