(DEFINE-FILE-INFO PACKAGE "INTERLISP" READTABLE "INTERLISP" BASE 10)

(FILECREATED "26-Sep-2022 16:56:23" {DSK}<home>larry>homedir>LARRY.;24 9418   

      :CHANGES-TO (ADVICE (ERROR :IN \DO-DEFINE-FILE-INFO))
                  (FNS 3WAY CLOSEI DE LOWESTVERSION HCENVOS RELOAD SHOWDIFFS)
                  (VARS LARRYCOMS)

      :PREVIOUS-DATE "22-Sep-2022 09:38:44" {DSK}<home>larry>homedir>LARRY.;23)


(PRETTYCOMPRINT LARRYCOMS)

(RPAQQ LARRYCOMS
       [(P (MOVD? 'NILL 'MAKE-EXTERNALFORMAT)
           (VIDEOCOLOR T)
           (WINDOWPROP PROMPTWINDOW 'TITLE NIL)
           (DSPFONT '(HELVETICA 18 BRR)
                  PROMPTWINDOW)
           (MOVEW PROMPTWINDOW '(774 . 901))
           (FONTSET 'LARGER)
           (NLSETQ (FILESLOAD (SYSLOAD)
                          UNIXYCD))
           (MOVD 'VALUEOF 'IT)
           (FILESLOAD (FROM VALUEOF (MEDLEYDIR :ROOMS))
                  ROOMS))
        (ADVISE (ERROR :IN \DO-DEFINE-FILE-INFO))
        (FILES (SYSLOAD)
               PAGEHOLD MANAGER BACKGROUND-YIELD GITFNS FILEWATCH SAMEDIR SKETCH MEDLEY-UTILS VTCHAT
               PICK BUTTONS WDWHACKS)
        (P (FILEWATCH :ON)
           (RESTORE-BUTTONS)
           (NLSETQ (POSTSCRIPT.INIT)))
        (FNS 3WAY CLOSEI DE LOWESTVERSION HCENVOS RELOAD SHOWDIFFS)
        [VARS (LCASEFLG)
              (*ED-OFFERS-PROPERTY-LIST*)
              (AUTOBACKTRACEFLG 'ALWAYS)
              (DEFAULTPRINTERTYPE 'POSTSCRIPT)
              [INITIALSLST '(("larry" "Larry" "lmm")
                             ("masinter" "Larry" "lmm")
                             ("lmm" "Larry" "lmm")
                             ("pi" "Larry" "lmm"]
              (INITIALS "lmm")
              (IDLE.PROFILE '(TIMEOUT 10 DISPLAYFN IDLE.RANDOM SAVEVM 1 LOGOUT 2]
        (COMMANDS "who")
        (DECLARE%: DONTEVAL@LOAD DOEVAL@COMPILE DONTCOPY COMPILERVARS (ADDVARS (NLAMA DE)
                                                                             (NLAML)
                                                                             (LAMA])

(MOVD? 'NILL 'MAKE-EXTERNALFORMAT)

(VIDEOCOLOR T)

(WINDOWPROP PROMPTWINDOW 'TITLE NIL)

(DSPFONT '(HELVETICA 18 BRR)
       PROMPTWINDOW)

(MOVEW PROMPTWINDOW '(774 . 901))

(FONTSET 'LARGER)

(NLSETQ (FILESLOAD (SYSLOAD)
               UNIXYCD))

(MOVD 'VALUEOF 'IT)

(FILESLOAD (FROM VALUEOF (MEDLEYDIR :ROOMS))
       ROOMS)

[XCL:REINSTALL-ADVICE '(ERROR :IN \DO-DEFINE-FILE-INFO)
       :BEFORE
       '((:LAST (AND (EQ MESS2 ':FORMAT)
                     (RETURN]

(READVISE (ERROR :IN \DO-DEFINE-FILE-INFO))

(FILESLOAD (SYSLOAD)
       PAGEHOLD MANAGER BACKGROUND-YIELD GITFNS FILEWATCH SAMEDIR SKETCH MEDLEY-UTILS VTCHAT PICK 
       BUTTONS WDWHACKS)

(FILEWATCH :ON)

(RESTORE-BUTTONS)

(NLSETQ (POSTSCRIPT.INIT))
(DEFINEQ

(3WAY
  [LAMBDA (X)                                              (* ; "Edited  2-Jun-2022 20:23 by larry")
    (LET [(CURRENT (INFILEP X))
          (START (INFILEP (PACKFILENAME.STRING 'VERSION (LOWESTVERSION X)
                                 'NAME X)))
          (CLTL2 (INFILEP (PACKFILENAME.STRING 'DIRECTORY (MEDLEYDIR "CLTL2")
                                 'NAME X]
         (CSBROWSER START CURRENT)
         (CSBROWSER START CLTL2])

(CLOSEI
  [LAMBDA NIL                                               (* ; "Edited 19-Feb-2021 14:33 by rmk:")

    (* ;; "Close all inspector windows")

    (FOR W IN (OPENWINDOWS) WHEN (OR (EQ 'INSPECTW.REPAINTFN (WINDOWPROP W 'REPAINTFN))
                                     (WINDOWPROP W 'INSPECTWINDOW)) DO (CLOSEW W])

(DE
  [NLAMBDA X                                               (* ; "Edited 13-Sep-2022 09:05 by larry")
    (DEFINE (LIST `(,(CAR X)
                    (LAMBDA ,(CADR X)
                      ,@(CDDR X])

(LOWESTVERSION
  [LAMBDA (X)                                              (* ; "Edited  2-Jun-2022 20:14 by larry")
    (LET ((VERS (DIRECTORY (PACKFILENAME.STRING 'VERSION '* 'BODY X)))
          (MIN 9999991))
         (for Y in VERS bind Z when (< (SETQ Z (FILENAMEFIELD Y 'VERSION))
                                       MIN) do (SETQ MIN Z))
         MIN])

(HCENVOS
  [LAMBDA NIL                                              (* ; "Edited 26-Jul-2022 12:16 by larry")
    (HCFILES "{DSK}<home>larry>envos>" "{DSK}<home>larry>medley>tmp>psfiles>"])

(RELOAD
  [LAMBDA (FILES OLDONLY)                                   (* ; "Edited 18-Aug-2021 00:02 by rmk:")

    (* ;; "Reloads new compiled versions and notices symbolics, skipping non-Lisp files in FILES.  Reloads only already present files if OLDONLY.")
                                                             (* ; 
                                               "Get rid of versions, and also compile.ext extensions")
    [SETQ FILES (FOR F EXT INSIDE FILES COLLECT [SETQ EXT (U-CASE (FILENAMEFIELD F 'EXTENSION] 
                                                             (* ; 
                                                    "Must wipe out NIL extension to eliminate period")
                                              (U-CASE (PACKFILENAME 'EXTENSION
                                                             (AND (NOT (MEMB EXT 
                                                                             *COMPILED-EXTENSIONS*))
                                                                  EXT)
                                                             'VERSION NIL 'BODY F]
                                                             (* ; 
                                                     "Eliminate duplicates, even through COMPILE.EXT")
    (SETQ FILES (FOR FTAIL ON FILES UNLESS (MEMB (CAR FTAIL)
                                                 (CDR FTAIL)) COLLECT (CAR FTAIL)))
                                                             (* ; 
                                                     " is default LDFLG when file hasn't been loaded")
    (FOR F ROOTFNAME CNAME SNAME LDFLG IN FILES EACHTIME (SETQ ROOTFNAME (ROOTFILENAME F))
       WHEN (SETQ LDFLG (IF (NOT OLDONLY)
                          ELSEIF (GETP ROOTFNAME 'FILE)
                            THEN T
                          ELSEIF (GETP ROOTFNAME 'FILEDATES)
                            THEN 'SYSLOAD))
       WHEN (PROGN (IF (SETQ CNAME (FINDFILE-WITH-EXTENSIONS F NIL *COMPILED-EXTENSIONS*))
                       THEN (SETQ SNAME (INFILEP (PACKFILENAME 'EXTENSION NIL 'VERSION NIL
                                                        'BODY CNAME)))
                     ELSE (SETQ SNAME (FINDFILE F T)))
                   (CL:WHEN SNAME
                       (CL:UNLESS (LISPSOURCEFILEP SNAME)
                              (SETQ SNAME NIL)))
                   (OR CNAME SNAME (PROGN (PRINTOUT T "NOT FOUND:  " F T)
                                          NIL)))
       COLLECT                                               (* ; 
                                                 "Don't fiddle properties at all if file isn't found")
                                                             (* ; 
                        "Don't do DELDEF, cause it will remove it from FILES commands in other files")
             [FOR LST IN '(FILELST NOTCOMPILEDFILES NOTLISTEDFILES COPYRIGHT)
                DO (/SETTOPVAL LST (REMOVE ROOTFNAME (GETTOPVAL LST]
             (/REMPROP ROOTFNAME 'FILE)
             (/REMPROP ROOTFNAME 'FILECHANGES)
             (/REMPROP ROOTFNAME 'FILEMAP)
             (/REMPROP ROOTFNAME 'FILEDATES)
             (IF CNAME
                 THEN (LOAD CNAME LDFLG))
             (IF SNAME
                 THEN (IF CNAME
                          THEN (OR (EQ LDFLG 'SYSLOAD)
                                   (LOADFROM SNAME))
                        ELSE (LOAD SNAME LDFLG)))
             (FOR X IN (FILEFNSLST ROOTFNAME) DO (/REMPROP X 'EXPR))
             (/RPLACD (GETP ROOTFNAME 'FILE))
             (APPEND (MKLIST CNAME)
                    (MKLIST SNAME])

(SHOWDIFFS
  [LAMBDA NIL
    (FOR X IN FILELST BIND Y Z WHEN [SETQ Y (CDR (GET X 'FILE]
       DO (PRINTOUT T X Y T)
          (FOR C IN Y DO (FOR D IN (CDR C) DO (PRINTOUT T X " " (CAR C)
                                                     " " D ": " (COMPAREDEFS D (CAR C)
                                                                       '(NIL FILE))
                                                     T T])
)

(RPAQQ LCASEFLG NIL)

(RPAQQ *ED-OFFERS-PROPERTY-LIST* NIL)

(RPAQQ AUTOBACKTRACEFLG ALWAYS)

(RPAQQ DEFAULTPRINTERTYPE POSTSCRIPT)

(RPAQQ INITIALSLST (("larry" "Larry" "lmm")
                    ("masinter" "Larry" "lmm")
                    ("lmm" "Larry" "lmm")
                    ("pi" "Larry" "lmm")))

(RPAQ INITIALS "lmm")

(RPAQQ IDLE.PROFILE (TIMEOUT 10 DISPLAYFN IDLE.RANDOM SAVEVM 1 LOGOUT 2))

(DEFCOMMAND "who" (&REST LINE)
   "Dotless MS Query"
   (MASTERSCOPE (CONS 'WHO LINE)))
(DECLARE%: DONTEVAL@LOAD DOEVAL@COMPILE DONTCOPY COMPILERVARS 

(ADDTOVAR NLAMA DE)

(ADDTOVAR NLAML )

(ADDTOVAR LAMA )
)
(DECLARE%: DONTCOPY
  (FILEMAP (NIL (2792 8731 (3WAY 2802 . 3263) (CLOSEI 3265 . 3619) (DE 3621 . 3838) (LOWESTVERSION 3840
 . 4234) (HCENVOS 4236 . 4437) (RELOAD 4439 . 8261) (SHOWDIFFS 8263 . 8729)))))
STOP
